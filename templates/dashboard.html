<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ company }} Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
  <!-- Top bar -->
  <header class="topbar glass">
    <h1>{{ company }}</h1>
    <div id="stats" class="stats"></div>
    <div class="clock">{{ datetime.utcnow().strftime("%H:%M UTC") }}</div>
  </header>

  <!-- Control Center -->
  <section class="controls glass">
    <h2>Control Center</h2>
    <div class="buttons">
      <button id="refresh-btn" class="btn">ğŸ”„ Refresh Sources</button>
      <button id="start-worker-btn" class="btn">â–¶ï¸ Start Worker</button>
      <button id="stop-worker-btn" class="btn">â¹ Stop Worker</button>
    </div>
    <form id="enqueue-form" class="enqueue">
      <input id="enqueue-url" type="url" placeholder="Paste affiliate linkâ€¦" required>
      <button id="enqueue-btn" type="submit" class="btn">â• Enqueue Link</button>
    </form>
    <div class="interval">
      <label for="interval-input">Set Interval (minutes):</label>
      <input id="interval-input" type="number" min="1" step="1">
      <button id="interval-btn" class="btn">â± Update Interval</button>
    </div>
  </section>

  <!-- Activity Feed -->
  <section class="activity glass">
    <h2>Recent Activity</h2>
    <ul id="activity-feed"></ul>
  </section>

  <!-- System Health -->
  <section class="health glass">
    <h2>System Health</h2>
    <p>Worker: <span id="worker-status">Unknown</span></p>
    <p>Redis Queue: Connected âœ…</p>
    <p>Next Refresh: <span id="next-refresh">--</span></p>
  </section>

  <!-- Toast notifications -->
  <div id="toast"></div>

  <!-- Charts -->
  <section class="charts glass">
    <h2>Performance</h2>
    <canvas id="clickChart"></canvas>
    <canvas id="sourceChart"></canvas>
  </section>

  <!-- Floating Control Dock -->
  <div class="control-dock glass">
    <button id="refresh-btn" class="btn">ğŸ”„</button>
    <button id="start-worker-btn" class="btn">â–¶ï¸</button>
    <button id="stop-worker-btn" class="btn">â¹</button>
    <button id="enqueue-btn" class="btn">â•</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>
