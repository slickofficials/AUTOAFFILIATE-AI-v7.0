<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BEAST v21.0</title>
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;600;900&display=swap" rel="stylesheet">
  <style>
    :root{--blue:#007AFF;--red:#FF2D55;--bg:#F2F2F7;--card:#FFF;--shadow:0 8px 30px rgba(0,0,0,0.15);}
    *{margin:0;padding:0;box-sizing:border-box;font-family:'SF Pro Display',sans-serif;}
    body{background:var(--bg);padding:20px;}
    .container{max-width:420px;margin:auto;background:var(--card);border-radius:32px;overflow:hidden;box-shadow:var(--shadow);}
    .header{background:linear-gradient(135deg,#007AFF,#00C2FF);padding:50px 20px;text-align:center;color:white;}
    .header h1{font-size:2.5rem;font-weight:900;}
    .time{font-size:1.1rem;opacity:0.9;margin-top:10px;}
    .stats{padding:25px;}
    .stat-card{background:var(--card);border-radius:22px;padding:18px;margin-bottom:15px;text-align:center;box-shadow:0 4px 15px rgba(0,0,0,0.1);}
    .stat-card h3{font-size:0.95rem;color:#8E8E93;text-transform:uppercase;letter-spacing:1.2px;}
    .stat-card p{font-size:2.2rem;font-weight:800;color:#1C1C1E;}
    .beast-btn{padding:25px;text-align:center;}
    .beast-btn button{background:linear-gradient(135deg,var(--red),#FF5E3A);color:white;border:none;border-radius:50px;padding:20px 50px;font-size:1.5rem;font-weight:800;width:85%;box-shadow:0 10px 25px rgba(255,45,85,0.5);}
    .swipe-hint{text-align:center;color:#8E8E93;font-size:0.9rem;margin-top:20px;}
    .swipe-hint span{color:var(--blue);font-weight:600;}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>BEAST v21.0</h1>
      <div class="time" id="time"></div>
    </div>
    <div class="stats">
      <div class="stat-card"><h3>POSTS</h3><p data-posts>0</p></div>
      <div class="stat-card"><h3>REVENUE</h3><p data-revenue>₦0.00</p></div>
      <div class="stat-card"><h3>REFS</h3><p data-refs>0</p></div>
    </div>
    <div class="beast-btn">
      <button onclick="launch()">LAUNCH BEAST</button>
    </div>
    <div class="swipe-hint">
      <span>Swipe Left</span> to Refresh • <span>Swipe Right</span> to Post
    </div>
  </div>

  <script>
    setInterval(() => document.getElementById('time').textContent = new Date().toLocaleString('en-GB'), 1000);
    let startX = 0;
    document.body.addEventListener('touchstart', e => startX = e.touches[0].clientX);
    document.body.addEventListener('touchend', e => {
      const diff = startX - e.changedTouches[0].clientX;
      if (Math.abs(diff) > 80) {
        if (diff > 0) refresh(); else launch();
      }
    });
    function launch() { fetch('/beast_campaign', {method:'POST'}); alert("BEAST LAUNCHED"); }
    function refresh() {
      fetch('/api/stats').then(r=>r.json()).then(d => {
        document.querySelector('[data-posts]').textContent = d.posts_sent;
        document.querySelector('[data-revenue]').textContent = `₦${d.revenue.toFixed(2)}`;
        document.querySelector('[data-refs]').textContent = d.referrals;
      });
    }
    setInterval(refresh, 15000); refresh();
  </script>
</body>
</html>
